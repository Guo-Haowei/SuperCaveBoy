<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <!-- address bar icon -->
    <link rel="icon" type="image/png" href="resources/icon.png" />
    <title>Cave Boy</title>
    <link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karma" />

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="menu-bar">
      <div class="menu-item">
        File
        <div class="dropdown">
          <div class="dropdown-item">New</div>
          <div class="dropdown-item">Open</div>
          <div class="dropdown-item">Save</div>
        </div>
      </div>
      <div class="menu-item">
        Edit
        <div class="dropdown">
          <div class="dropdown-item">Undo</div>
          <div class="dropdown-item">Redo</div>
        </div>
      </div>
      <div class="menu-item">
        Options
        <div class="dropdown">
          <input id="debugGrid" type="checkbox" checked />
          Debug Grid
          <br />
          <input id="debugCollisions" type="checkbox" checked />
          Debug Collisions
        </div>
      </div>
    </div>
    <div class="container">
      <canvas id="gameCanvas" width="960" height="600"></canvas>
      <button id="playButton" class="play-button">â–¶ Play</button>
    </div>

    <!-- @TODO: remove these includes -->
    <script src="src/world/data.js"></script>

    <!-- main -->
    <script type="module" src="src/main.ts"></script>

    <script>
      const menuItems = document.querySelectorAll('.menu-item');

      menuItems.forEach((item) => {
        item.addEventListener('click', (e) => {
          // Toggle active class on clicked item
          const isActive = item.classList.contains('active');

          // Close all dropdowns
          menuItems.forEach((i) => i.classList.remove('active'));

          // If not already active, open this one
          if (!isActive) {
            item.classList.add('active');
          }

          // Prevent event from bubbling up (optional)
          e.stopPropagation();
        });
      });

      // Close dropdowns when clicking outside
      document.addEventListener('click', () => {
        menuItems.forEach((i) => i.classList.remove('active'));
      });
    </script>
  </body>
</html>
